#!/bin/sh
export DISPLAY=:0

. /usr/local/GNUstep/System/Library/Makefiles/GNUstep.sh

defaults write NSGlobalDomain GSTheme Rik

export EDITOR=nano
export CC=clang19
export SUDO_ASKPASS=$(which SudoAskPass)
export NO_AT_BRIDGE=1

globalshortcutsd &

# Start D-Bus session if not already running
if [ -z "$DBUS_SESSION_BUS_ADDRESS" ]; then
    eval "$(dbus-launch --sh-syntax --exit-with-x11)"
fi

# Launch window manager and panel in background
xfwm4 &
#/home/user/uroswm/uroswm/uroswm &

# Start VirtualBox client when the guest additions are installed
if [ -f "/usr/local/bin/VBoxClient-all" ] ; then
  /usr/local/bin/VBoxClient-all &
fi

# Temporary panel until GNUstep native panel replaces
xfce4-panel --sm-client-disable 2>&1 >/tmp/xfce-panel.log  &

# Fix copy / paste issues
xfce4-clipman &

# Start Network manager tray
sudo /usr/local/bin/networkmgr &

# Start Update station stray for update notifications
sudo update-station &

# xterm &

# Optional: small delay to allow environment to settle
# sleep 2

# Launch GWorkspace
openapp GWorkspace
